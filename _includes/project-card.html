<div class="project-grid">
{% for project in include.projects %}
  {% assign primary_url = project.blog_post | default: project.site_url | default: project.github %}

  <div class="project-card" {% if primary_url %}data-href="{{ primary_url }}"{% endif %}>
    <div class="project-card-inner">
      {% if project.thumbnail %}
      <div class="project-thumbnail">
        <img src="{{ project.thumbnail | relative_url }}" alt="{{ project.title }}" onerror="this.parentElement.style.display='none'">
      </div>
      {% endif %}

      <div class="project-body">
        <h3 class="project-title">{{ project.title }}</h3>

        {% if project.description %}
        <p class="project-description">{{ project.description | truncatewords: 20 }}</p>
        {% endif %}

        <div class="project-links">
          {% if project.demo_url %}
          <a href="{{ project.demo_url }}" class="project-link-btn" target="_blank" onclick="event.stopPropagation()">
            {% if project.demo_label %}{{ project.demo_label }}{% else %}Demo{% endif %}
          </a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endfor %}
</div>

<script>
// Make cards clickable (desktop hover effect)
document.addEventListener('DOMContentLoaded', function() {
  // Add class to cards with buttons for styling
  document.querySelectorAll('.project-card').forEach(function(card) {
    if (card.querySelector('.project-link-btn')) {
      card.classList.add('has-button');
    }
  });

  // Make cards clickable
  document.querySelectorAll('.project-card[data-href]').forEach(function(card) {
    card.style.cursor = 'pointer';
    card.addEventListener('click', function(e) {
      // Only trigger if not clicking on a link
      if (!e.target.closest('a')) {
        var url = this.getAttribute('data-href');
        if (url) {
          window.open(url, '_blank');
        }
      }
    });
  });
});
</script>
